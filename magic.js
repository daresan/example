function b(a){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){b=function(a){return typeof a}}else{b=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return b(a)}function e(a,b){var c=[];var d=[];var e=arguments.length;while(e-->2){c.push(arguments[e])}while(c.length){var f=c.pop();if(f&&f.pop){for(e=f.length;e--;){c.push(f[e])}}else if(f!=null&&f!==true&&f!==false){d.push(f)}}return typeof a==="function"?a(b||{},d):{nodeName:a,attributes:b||{},children:d,key:b&&b.key}}function c(a,b,c,d){var v=[].map;var w=d&&d.children[0]||null;var x=w&&e(w);var y=[];var z;var A=true;var B=j(a);var C=m([],B,j(b));h();return C;function e(a){return{nodeName:a.nodeName.toLowerCase(),attributes:{},children:v.call(a.childNodes,function(a){return a.nodeType===3?a.nodeValue:e(a)})}}function f(a){return typeof a==="function"?f(a(B,C)):a!=null?a:""}function g(){z=!z;var a=f(c);if(d&&!z){w=u(d,w,x,x=a)}A=false;while(y.length){y.pop()()}}function h(){if(!z){z=true;setTimeout(g)}}function j(a,b){var c={};for(var d in a){c[d]=a[d]}for(var d in b){c[d]=b[d]}return c}function k(a,b,c){var d={};if(a.length){d[a[0]]=a.length>1?k(a.slice(1),b,c[a[0]]):b;return j(c,d)}return b}function l(a,b){var c=0;while(c<a.length){b=b[a[c++]]}return b}function m(a,b,c){for(var d in c){typeof c[d]==="function"?function(d,e){c[d]=function(d){var f=e(d);if(typeof f==="function"){f=f(l(a,B),c)}if(f&&f!==(b=l(a,B))&&!f.then){h(B=k(a,j(b,f),B))}return f}}(d,c[d]):m(a.concat(d),b[d]=j(b[d]),c[d]=j(c[d]))}return c}function n(a){return a?a.key:null}function o(a){return a.currentTarget.events[a.type](a)}function p(a,b,c,d,e){if(b==="key"){}else if(b==="style"){if(typeof c==="string"){a.style.cssText=c}else{if(typeof d==="string")d=a.style.cssText="";for(var f in j(d,c)){var g=c==null||c[f]==null?"":c[f];if(f[0]==="-"){a.style.setProperty(f,g)}else{a.style[f]=g}}}}else{if(b[0]==="o"&&b[1]==="n"){b=b.slice(2);if(a.events){if(!d)d=a.events[b]}else{a.events={}}a.events[b]=c;if(c){if(!d){a.addEventListener(b,o)}}else{a.removeEventListener(b,o)}}else if(b in a&&b!=="list"&&b!=="type"&&b!=="draggable"&&b!=="spellcheck"&&b!=="translate"&&!e){a[b]=c==null?"":c}else if(c!=null&&c!==false){a.setAttribute(b,c)}if(c==null||c===false){a.removeAttribute(b)}}}function q(a,b){var c=typeof a==="string"||typeof a==="number"?document.createTextNode(a):(b=b||a.nodeName==="svg")?document.createElementNS("http://www.w3.org/2000/svg",a.nodeName):document.createElement(a.nodeName);var d=a.attributes;if(d){if(d.oncreate){y.push(function(){d.oncreate(c)})}for(var e=0;e<a.children.length;e++){c.appendChild(q(a.children[e]=f(a.children[e]),b))}for(var g in d){p(c,g,d[g],null,b)}}return c}function r(a,b,c,d){for(var e in j(b,c)){if(c[e]!==(e==="value"||e==="checked"?a[e]:b[e])){p(a,e,c[e],b[e],d)}}var f=A?c.oncreate:c.onupdate;if(f){y.push(function(){f(a,b)})}}function s(a,b){var c=b.attributes;if(c){for(var d=0;d<b.children.length;d++){s(a.childNodes[d],b.children[d])}if(c.ondestroy){c.ondestroy(a)}}return a}function t(a,b,c){function d(){a.removeChild(s(b,c))}var e=c.attributes&&c.attributes.onremove;if(e){e(b,d)}else{d()}}function u(a,b,c,d,e){if(d===c){}else if(c==null||c.nodeName!==d.nodeName){var g=q(d,e);a.insertBefore(g,b);if(c!=null){t(a,b,c)}b=g}else if(c.nodeName==null){b.nodeValue=d}else{r(b,c.attributes,d.attributes,e=e||d.nodeName==="svg");var h={};var j={};var l=[];var m=c.children;var o=d.children;for(var p=0;p<m.length;p++){l[p]=b.childNodes[p];var s=n(m[p]);if(s!=null){h[s]=[l[p],m[p]]}}var p=0;var v=0;while(v<o.length){var s=n(m[p]);var w=n(o[v]=f(o[v]));if(j[s]){p++;continue}if(w!=null&&w===n(m[p+1])){if(s==null){t(b,l[p],m[p])}p++;continue}if(w==null||A){if(s==null){u(b,l[p],m[p],o[v],e);v++}p++}else{var x=h[w]||[];if(s===w){u(b,x[0],x[1],o[v],e);p++}else if(x[0]){u(b,b.insertBefore(x[0],l[p]),x[1],o[v],e)}else{u(b,l[p],null,o[v],e)}j[w]=o[v];v++}}while(p<m.length){if(n(m[p])==null){t(b,l[p],m[p])}p++}for(var p in h){if(!j[p]){t(b,h[p][0],h[p][1])}}}return b}}var f=function(d){return function(){var f=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var h=function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++){d[e-1]=arguments[e]}return d.some(function(c){return c===b(a)})};if(!g){if(h(f,"string","number")||Array.isArray(f)||h(f,"function")){g=f;f={}}else if(h(f.View,"function")){g=f.View;f={}}}return e(d,f,g)}};var g=f("div");var h=f("button");var j=f("h1");var k=f("i");var i=function(a){return k(a.app.title)};var l=f("h2");var m=f("li");var n=f("p");var o=f("ul");var p={View:function(a,b){return g({class:"Wrapper".concat(a.wrapperStateVar?" Test":"")},[i,h({onclick:b.wrapperAction},a.buttonText)])}};var q={View:function(a,b){return g([j("Counter"),g("count: ".concat(a.count)),g("this counter globally shares it's state with all other counters"),h({onclick:function(){return b.count(1)}},"+1"),h({onclick:function(){return b.count(10)}},"+10"),h({onclick:function(){return b.count(-1)}},"-1"),h({onclick:function(){return b.count(-10)}},"-10")])}};var r={View:function(){return t({class:"main"},[g({class:"wrapper"},["made with a few bits of ",a({to:"https://github.com/magic/core",target:"_blank",rel:"noopener"},"magic")])])}};var s=f("a");var a=function(a,b){var c=a.to,d=a.href,e=a.text,f=a.nofollow,g=a.noreferrer;return function(a,h){c=c||d||"";var i={href:c};if(c&&c.startsWith("/")&&!c.startsWith("//")){i.onclick=function(a){return h.go({e:a,to:c})}}else{i.rel="noopener";if(f){i.rel+=" nofollow"}if(g){i.rel+=" noreferrer"}i.target="_blank"}return s(i,e||b)}};var t=f("footer");var u={View:function(b){var c=b.name,d=c===void 0?"menu":c,e=b.between,f=e===void 0?false:e;return function(b,c){if(!b[d]||!b[d].length){return}if(typeof window!=="undefined"){window.addEventListener("popstate",c.go)}return v({class:"Menu"},[o(b[d].map(function(c,e){var g={};var h=c.to===b.url;var i=c.to!=="/example/"&&b.url.startsWith(c.to);if(h||i){g.class="active"}return[m(g,a(c)),f&&e<b[d].length-1?m(" - "):""]}))])}}};var v=f("nav");var w=f("img");var x=function(a){return function(){if(!a.src){return}if(!a.alt){a.role="presentation";a.alt=""}return w(a)}};var y=f("header");var z=f("span");var A=function(b){return(b.logo||b.menu||b.tagline)&&y({class:"main"},[(b.logo||b.logotext)&&a({to:"/example/",class:"logo-wrapper"},[b.logo&&x({class:"logo",src:b.logo}),b.logotext&&z({class:"logo-text"},b.logotext)]),b.menu&&u.View])};var B={"/example/deep/":function(a,b){return[j(a.title),g("page content"),q.View(a,b)]},"/example/":function(a,b){return[j(a.title),g([n("index page content"),n("can stretch multiple lines"),o([m("and contain"),m("lists of content")])]),q.View(a,b),l("local var:"),n("the variable determining the color is local to this page."),p.View(a,b)]},"/example/404/":function(){return g("404 - not found")}};var C={"url":"/example/","app":{"title":"Custom App Title","description":"Custom App Description"},"menu":[{"to":"/example/","text":"home"},{"to":"/example/deep/","text":"deep"}],"logo":"/example/logo.png","pages":{"/example/deep/":{"title":"h1 deep/index","htmlTitle":"testing the html title tag"},"/example/":{"title":"h1 indexpage","description":"custom description","wrapperStateVar":false,"buttonText":"click me!"}},"count":0};C.url=window.location.pathname;var D={"go":function(a){var b=a.e,c=a.to;return function(a){b.preventDefault();var d=a.url;if(c){d=c.replace(window.location.origin,"");if(d!==a.url){window.history&&window.history.pushState({urlPath:d},"",d)}}else{if(b.state){d=b.state.urlPath}else{d="/example/"}}return{url:d,prev:a.url}}},"pages":{"/example/deep/":{"deepAction":function b(a){return{test:!a.test}}},"/example/":{"wrapperAction":function a(){return function(a){return{wrapperStateVar:!a.wrapperStateVar}}}}},"count":function b(a){return function(b){return{count:b.count+a}}}};function E(a,b){var c=B[a.url]?a.url:"/example/404/";var d=B[c];var e=a.pages[c];for(var h in e){a[h]=e[h]}var f=b.pages[c];for(var i in f){b[i]=f[i]}return g({class:"wrapper"},[A,d?g({class:"page"},d(a,b)):g({class:"page"},"404 - not found"),r.View])}var F=document;var d=F.getElementById("magic");if(!d){d=F.createElement("div");d.id="magic";F.body.appendChild(d)}c(C,D,E,d);